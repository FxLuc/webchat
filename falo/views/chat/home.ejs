<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('../link/head.ejs'); %>
    <%- include('../link/script.ejs'); %>
      <style>
        .rouded-recieve {
          border-radius: 15px 30px 30px 15px;
        }

        .rouded-send {
          border-radius: 30px 15px 15px 30px;
        }

        .tabe-hover-row {
          text-align: left;
          transition: 200ms;
        }

        .tabe-hover-row:hover {
          background-color: #fff;
          color: #17a2b8;
          transition: 200ms;
        }

        .rouded-0 {
          border: 0;
        }

        .text-light-not-important {
          color: #f8f9fa;
        }
      </style>
      <title>Falo</title>
</head>

<body style="height: 100vh; position: relative;">
  <%- include('./sidebar.ejs'); %>
    <div id="main">
      <!-- nav -->
      <%- include('./nav.ejs'); %>
        <div class="container-fluid">
          <div class="row flex-lg-nowrap">

            <!-- side contact -->
            <div class="col-12 col-lg-5 col-xl-4 px-0 border-right bg-light"
              style="height: calc(100vh - 54px); overflow-y: scroll; direction: rtl;">

              <div class="row ml-2">
                <div class="col tabe-hover-row text-center"> 3 <em class="fas fa-bell"></em></div>
                <div class="col tabe-hover-row text-center"> 2 <em class="fas fa-users"></em></div>
                <div class="col tabe-hover-row text-center" id="chatroom_count"> 0 <em class="fas fa-comments"></em></div>
              </div>

              <table class="table" style="direction: ltr;" id="chatroom_table" aria-hidden="true">
                <tbody>
                  <tr>
                    <td class="text-center">
                      <form id="form_find_email" class="form p-3 bg-light" action="javascript:;"
                        onsubmit="joinChatRoomByEmail(form_find_email.email.value)">
                        <div class="form-group">
                          <small class="form-text text-left text-danger form-feedback">
                            <% if (typeof(messages) !='undefined' ) { %>
                              <%= message %>
                                <% } %>
                          </small>
                          <div class="input-group">
                            <input class="form-control" type="email" id="email" name="email" placeholder="Nhập email..."
                              required>
                            <div class="input-group-prepend">
                              <button class="input-group-text btn btn-info" type="submit"><em
                                  class="fas fa-plus"></em></button>
                            </div>
                          </div>
                        </div>
                      </form>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>

            <!-- chat box -->
            <div class="col-12 col-lg-7 col-xl-8 bg-white">
              <div class="row" style="height: calc(100vh - 124px); overflow-y: scroll;">
                <table class="table" id="chatbox_table" aria-hidden="true">
                  <tbody>
                  </tbody>
                </table>
              </div>

              <div class="">
                <form id="formChat" class="form row p-3 bg-light" action="javascript:;"
                  onsubmit="sendMessage(form_message.form[0])">
                  <input type="text" id="form_message" class="col form-control mr-2" autocomplete="off"
                    placeholder="Nhập tin nhắn...">
                  <button type="submit" class="btn btn-info col-4 col-sm-3 col-md-2"><em
                      class="fas fa-paper-plane"></em> SEND</button>
                </form>
              </div>
            </div>
          </div>
        </div>
    </div>
    <script src="/javascripts/form_validate.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <%- include('./script.ejs'); %>
</body>

</html>